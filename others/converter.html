<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./../pure-js-tools/tools.js"></script>
    <script src="./build/translate.js"></script>
    <script src="./build/colorize.js"></script>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            background: #171714;
            color: whitesmoke;
        }
        textarea {
            min-height:250px;
            width: 100%;
            background: #272823;
            color: #eff0ea;
        }
        pre {
            background: #272823;
            color: #eff0ea;
            font-family: Roboto,Arial,sans-serif,Alkatip;
        }
        red {
            color: #f92f78;
        }
        yellow {
            color: #e7dc79;
        }
        green {
            color: #a1db27;
        }
        blue {
            color: #64d2e7;
        }
        grey {
            color: #8d7d4f;
        }
        purple {
            color: #a686ff;
        }
        orange {
            color: #fd8e2a;
        }
    </style>
</head>
<body>
    <h3>
        Converter
        for
        <a id="link" href="">UyghurScript</a>
    </h3>
    <textarea name="editor" id="editor"></textarea>
    <div id="code"></div>
</body>
</html>
<script>

"use strict";
var $ = query2selector();

let code = `
# a local variable
miqdar t qimmiti 0 bolsun
miqdar b qimmiti sanduq bolsun
miqdar key qimmiti [key] bolsun
miqdar val qimmiti [val] bolsun

@b[abc] = [abc]
@b{123} = 456
@b{key} = val

# a function with two arguments
fonkisiye f miqdar x y mezmuni
    t = x + y
    netije t qayturulsun
tamamlansun

# call functions and receive result
fonkisiye f bilen 10 20 ishlitilsun we r elinsun

# print the result value received
buyruq r yezilsun
`;


function setLang(lang) {
    let _text = $("#editor").nodes()[0].value;
    let _code = translate_ug_code(lang, _text);
    let _pre = colorize_ug_code(_code);
    // 
    let buttons = [];
    for (let i = 0; i < TRANSLATE_LANGS_ARR.length; i++) {
        const lang = TRANSLATE_LANGS_ARR[i];
        let button = `<button onclick="setLang('${lang}')">${lang}</button>`;
        buttons.push(button)
    }
    let _btn = buttons.join("\n");
    $("#code").html(_btn + _pre);
}

function language2buttons() {
    return `<div>${_text}</div>`;
}

window.onload = function() {
    $("#editor").html(code);
    $("#link").nodes()[0].href = TRANSLATE_PROJECT_REPO;
    setLang("en");
};
    
    </script>